<!DOCTYPE html>
<html>

<head>
  <title>测试页面</title>
</head>

<body>
  <h1>测试页面</h1>
  <button id='target1'>query</button>
  <button id='target2'>mutation</button>
  <button id='target3'>王志辉登录</button>
  <button id='target4'>王玉才登录</button>
  <script>
    // query 按钮
    document.querySelector('#target1').addEventListener('click', () => {
      var xhr = new XMLHttpRequest();
      xhr.responseType = 'json';
      xhr.open("POST", "/graphql");
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.setRequestHeader("Accept", "application/json");
      xhr.onload = function() {
        console.log('data returned:', xhr.response);
      }
      var query = `query($infoId:ID = 7){
        user(infoId: $infoId) {
          authList
        }
      }`;
      xhr.send(JSON.stringify({
        query: query,
        variables: {
          infoId: 2
        }
      }));
    }, false);

    // mutation 按钮
    document.querySelector('#target2').addEventListener('click', () => {
      var xhr = new XMLHttpRequest();
      xhr.responseType = 'json';
      xhr.open("POST", "/graphql");
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.setRequestHeader("Accept", "application/json");
      xhr.onload = function() {
        console.log('data returned:', xhr.response);
      }
      // -------------------
      var query = `mutation ($authObj:authInputType){
        createUser(authObj:$authObj) {
          infoId,
          infoName,
          infoNickname
        }
      }`;
      xhr.send(JSON.stringify({
        query: query,
        variables: {
          authObj: {
            authType: 'phone',
            authAccount: '13012093226',
            authCredential: '421432',
          }
        }
      }));
      // -------------------
    }, false);
    // 王志辉登录 按钮
    document.querySelector('#target3').addEventListener('click', () => {
      var xhr = new XMLHttpRequest();
      xhr.responseType = 'json';
      xhr.open("POST", "/graphql");
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.setRequestHeader("Accept", "application/json");
      xhr.onload = function() {
        console.log('data returned:', xhr.response);
      }
      var query = `mutation ($authObj:authInputType){
        userLogin(authObj:$authObj) {
          infoId,
          infoName,
          infoNickname
        }
      }`;
      xhr.send(JSON.stringify({
        query: query,
        variables: {
          authObj: {
            authType: 'phone',
            authAccount: '15167120027',
            authCredential: '123456',
          }
        }
      }));
    }, false)
    // 王玉才登录 按钮
    document.querySelector('#target4').addEventListener('click', () => {
      var xhr = new XMLHttpRequest();
      xhr.responseType = 'json';
      xhr.open("POST", "/graphql");
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.setRequestHeader("Accept", "application/json");
      xhr.onload = function() {
        console.log('data returned:', xhr.response);
      }
      var query = `mutation ($authObj:authInputType){
        userLogin(authObj:$authObj) {
          infoId,
          infoName,
          infoNickname
        }
      }`;
      xhr.send(JSON.stringify({
        query: query,
        variables: {
          authObj: {
            authType: 'phone',
            authAccount: '13012093226',
            authCredential: '421432',
          }
        }
      }));
    }, false)
  </script>
</body>

</html>
